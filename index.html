<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Descubra como tratar naturalmente diabetes, insônia, ansiedade e mais com ingredientes da sua cozinha. Guia completo de receitas naturais." />
    <title>Farmácia Natural em Casa | Remédios Naturais Para Toda Família</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Load fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Meta tags for SEO -->
    <meta name="robots" content="index, follow" />
    <meta name="author" content="Farmácia Natural em Casa" />
    <meta name="keywords" content="remédios naturais, receitas caseiras, saúde natural, diabetes, insônia, ansiedade" />
    
    <!-- Open Graph tags -->
    <meta property="og:title" content="Farmácia Natural em Casa | Remédios Naturais Para Toda Família" />
    <meta property="og:description" content="Descubra como tratar naturalmente diabetes, insônia, ansiedade e mais com ingredientes da sua cozinha." />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="pt_BR" />
    
    <!-- Twitter Card tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Farmácia Natural em Casa | Remédios Naturais Para Toda Família" />
    <meta name="twitter:description" content="Descubra como tratar naturalmente diabetes, insônia, ansiedade e mais com ingredientes da sua cozinha." />
    
    <!-- UTMify Scripts - Full Implementation -->
    <script>
      // UTMify Pixel Script
      window.pixelId = "68be1608013346c26842c789";
      
      // Handle Vercel dynamic URLs - normalize to base domain
      if (window.location.hostname.includes('vercel.app')) {
        // Override location properties to use base URL
        const baseUrl = window.location.origin;
        const basePath = '/';
        
        // Create normalized URL for tracking
        window.utmifyBaseUrl = baseUrl + basePath;
        
        // Override history API to prevent URL changes from breaking pixel
        const originalPushState = history.pushState;
        const originalReplaceState = history.replaceState;
        
        history.pushState = function() {
          originalPushState.apply(history, arguments);
          // Re-track page view on URL change
          setTimeout(() => {
            if (window.utmify && window.utmify.track) {
              window.utmify.track('PageView', {
                page_title: document.title,
                page_location: window.utmifyBaseUrl || window.location.href,
                page_referrer: document.referrer,
                timestamp: Date.now(),
                user_agent: navigator.userAgent,
                screen_resolution: `${screen.width}x${screen.height}`,
                viewport_size: `${window.innerWidth}x${window.innerHeight}`,
                is_vercel: window.location.hostname.includes('vercel.app')
              });
            }
          }, 100);
        };
        
        history.replaceState = function() {
          originalReplaceState.apply(history, arguments);
          // Re-track page view on URL change
          setTimeout(() => {
            if (window.utmify && window.utmify.track) {
              window.utmify.track('PageView', {
                page_title: document.title,
                page_location: window.utmifyBaseUrl || window.location.href,
                page_referrer: document.referrer,
                timestamp: Date.now(),
                user_agent: navigator.userAgent,
                screen_resolution: `${screen.width}x${screen.height}`,
                viewport_size: `${window.innerWidth}x${window.innerHeight}`,
                is_vercel: window.location.hostname.includes('vercel.app')
              });
            }
          }, 100);
        };
      }
      
      // UTMify Script Loader
      var a = document.createElement("script");
      a.setAttribute("async", "");
      a.setAttribute("defer", "");
      a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
      document.head.appendChild(a);
      
      // UTMify - Permissões completas sem restrições
      if (typeof window !== 'undefined') {
        window.utmifyPermissions = {
          localStorage: true,
          sessionStorage: true,
          cookies: true,
          tracking: true,
          analytics: true,
          crossDomain: true,
          thirdParty: true,
          fullAccess: true,
          vercelDynamicUrls: true,
          urlNormalization: true,
          allowAllEvents: true,
          allowAllParameters: true,
          bypassRestrictions: true,
          enableAllFeatures: true,
          captureAllData: true,
          noRestrictions: true,
          allowAllDomains: true,
          enableCrossSiteTracking: true,
          allowDataCollection: true,
          enableAdvancedTracking: true,
          bypassPrivacySettings: true,
          allowAllCookies: true,
          enableFullPixelAccess: true
        };
        
        // Desabilitar qualquer prevenção de tracking
        window.utmifyPreventTracking = false;
        window.utmifyAllowAll = true;
        window.utmifyBypass = true;
        window.trackingAllowed = true;
        
        // Override restrições de privacidade
        Object.defineProperty(window, 'doNotTrack', {
          value: '0',
          writable: false
        });
        
        // Permitir requisições cross-origin
        if (document.domain) {
          try {
            document.domain = document.domain;
          } catch(e) {}
        }
        
        // Configurações específicas para Vercel
        window.utmifyVercelConfig = {
          handleDynamicUrls: true,
          normalizeUrls: true,
          trackAllPageChanges: true,
          persistAcrossReloads: true,
          enableFullTracking: true
        };
        
        // Configurações globais do UTMify
        window.utmifyGlobalConfig = {
          pixelId: "68be1608013346c26842c789",
          enableAllEvents: true,
          trackAllInteractions: true,
          captureAllData: true,
          noRestrictions: true
        };
      }
    </script>
    
    <script
      src="https://cdn.utmify.com.br/scripts/utms/latest.js"
      data-utmify-prevent-xcod-sck
      data-utmify-prevent-subids
      async
      defer
    ></script>
    
    <script>
      // Configuração adicional do UTMify para máxima compatibilidade
      window.addEventListener('load', function() {
        // Garantir que o UTMify tenha acesso completo
        if (window.utmify) {
          window.utmify.config = {
            allowCrossDomain: true,
            allowThirdParty: true,
            trackingEnabled: true,
            fullPermissions: true,
            noRestrictions: true,
            captureAllEvents: true
          };
          
          // Inicializar UTMify com pixel ID
          if (window.utmify.setPixelId) {
            window.utmify.setPixelId("68be1608013346c26842c789");
          }
          
          if (window.utmify.init) {
            window.utmify.init({
              pixelId: "68be1608013346c26842c789",
              enableAllFeatures: true,
              trackAllEvents: true,
              noRestrictions: true
            });
          }
        }
        
        // Rastrear visualização inicial da página com parâmetros completos
        setTimeout(function() {
          if (window.utmify && window.utmify.track) {
            window.utmify.track('PageView', {
              page_title: document.title,
              page_location: window.utmifyBaseUrl || window.location.href,
              page_referrer: document.referrer,
              timestamp: Date.now(),
              user_agent: navigator.userAgent,
              screen_resolution: `${screen.width}x${screen.height}`,
              viewport_size: `${window.innerWidth}x${window.innerHeight}`,
              language: navigator.language,
              platform: navigator.platform,
              cookie_enabled: navigator.cookieEnabled,
              is_vercel: window.location.hostname.includes('vercel.app'),
              pixel_id: "68be1608013346c26842c789"
            });
          }
        }, 1000);
      });
      
      // Garantir que os scripts possam executar
      if (typeof window.eval === 'undefined') {
        window.eval = function(code) {
          return Function(code)();
        };
      }
      
      // Eventos automáticos do UTMify
      document.addEventListener('DOMContentLoaded', function() {
        // Track scroll events
        let scrollTracked = false;
        window.addEventListener('scroll', function() {
          if (!scrollTracked && window.scrollY > 100) {
            scrollTracked = true;
            if (window.utmify && window.utmify.track) {
              window.utmify.track('Scroll', {
                scroll_depth: window.scrollY,
                page_location: window.utmifyBaseUrl || window.location.href,
                timestamp: Date.now()
              });
            }
          }
        });
        
        // Track time on page
        setTimeout(function() {
          if (window.utmify && window.utmify.track) {
            window.utmify.track('TimeOnPage', {
              time_spent: 30,
              page_location: window.utmifyBaseUrl || window.location.href,
              timestamp: Date.now()
            });
          }
        }, 30000);
      });
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <script>
      // ALTERE O LINK PARA A PÁGINA QUE QUISER MOSTRAR QUANDO O USUÁRIO TENTAR SAIR
      const link = 'https://receitas-eosin.vercel.app/';

      function setBackRedirect(url) {
        let urlBackRedirect = url;
        urlBackRedirect = urlBackRedirect =
          urlBackRedirect.trim() +
          (urlBackRedirect.indexOf('?') > 0 ? '&' : '?') +
          document.location.search.replace('?', '').toString();

        history.pushState({}, '', location.href);
        history.pushState({}, '', location.href);
        history.pushState({}, '', location.href);

        window.addEventListener('popstate', () => {
          console.log('onpopstate', urlBackRedirect);
          setTimeout(() => {
            location.href = urlBackRedirect;
          }, 1);
        });
      }

      setBackRedirect(link);
    </script>
  </body>
</html>